{% extends "wiki/base.html" %}
{% load static %}
{% load ui_tags %}
{% load form_tags %}
{% load wiki_form_tags %}
{% block title %}{{ page_title }} · Docs · {{ block.super }}{% endblock %}
{% block breadcrumbs %}
  {{ block.super }}
  {% if is_create %}
    <span>Create Doc</span>
  {% else %}
    <a href="{% url 'wiki-page-detail' detail_path %}">{{ page.title }}</a>
    <span>Edit</span>
  {% endif %}
{% endblock %}
{% block main %}
  <div class="card card--padded" data-text-card>
    <form method="post" class="form-main">
      {% csrf_token %}
      {% form_non_field_errors form %}
      <div class="form-actions form-actions--top">
        {% include "wiki/partials/page_form_actions.html" with btn_size="btn--sm" %}
      </div>
      {% form_field form.title %}
      {% tag_chip_input_field initial_tags=form.get_initial_tags help_text="Tag paths like 'machines/blackout' or 'guides'. Leave empty for untagged." %}
      {% if is_create %}
        {% template_selector_field record_type="page" %}
      {% endif %}
      {% form_field form.content %}
      <div class="form-actions">{% include "wiki/partials/page_form_actions.html" %}</div>
    </form>
  </div>
{% endblock %}
{% block extra_scripts %}
  {% include "core/partials/markdown_textarea_scripts.html" %}
  <script src="{% static 'core/tag_chip_input.js' %}" defer></script>
  <script src="{% static 'core/template_selector.js' %}" defer></script>
{% endblock %}
